<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Constructor</title>

    <!-- bootstrap -->

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
  </head>
  <body style="background-color: grey;">
    <h1>Constructor</h1>
    <p>
      A constructor function is a special type of function in programming that
      is used to create objects. It is typically used in object-oriented
      programming languages like JavaScript. The purpose of a constructor
      function is to set the initial values or properties of an object when it
      is created.
    </p>
    <hr />
    <!-- Bank Account -->
    <div class="container text-bg-dark p-5">
      <form id="accountForm">
        <div class="col">
          <label>Customer Name</label>
          <input
            type="text"
            class="form-control my-3"
            placeholder="Customer Name"
            id="customerName"
          />
        </div>
        <div class="col">
          <label>Amount</label>
          <input
            type="number"
            class="form-control my-3"
            placeholder="Initial Balance"
            id="balance"
          />
        </div>
        <div class="col">
          <button class="btn btn-primary my-4">Create Account</button>
        </div>
      </form>
    </div>

    <!-- Deposit -->
    <div class="container text-bg-success p-5 mt-5">
      <form id="depositForm">
        <div class="col">
          <label>Account Number</label>
          <input
            type="number"
            class="form-control my-3"
            placeholder="Account Number"
            id="accountNumber"
          />
        </div>
        <div class="col">
          <label>Amount</label>
          <input
            type="number"
            class="form-control my-3"
            placeholder="Deposit Balance"
            id="amountDeposit"
          />
        </div>
        <div class="col">
          <button class="btn btn-primary my-4">Deposit</button>
        </div>
      </form>
    </div>

      <!-- Withdraw -->

      <div class="container text-bg-danger p-5 mt-5">
        <form id="withdrawForm">
          <div class="col">
            <label>Account Number</label>
            <input
              type="number"
              class="form-control my-3"
              placeholder="Account Number"
              id="accountNumber"
            />
          </div>
          <div class="col">
            <label>Amount</label>
            <input
              type="number"
              class="form-control my-3"
              placeholder="Deposit Balance"
              id="amountWithdraw"
            />
          </div>
          <div class="col">
            <button class="btn btn-primary my-4">Withdraw</button>
          </div>
        </form>
      </div>

    <script>
      function BankAccount(customerName, balance = 0) {
        this.customerName = customerName;
        this.balance = +balance;
        this.accountNumber = Date.now();

        this.deposit = (amount) => {
          this.balance += amount;
        };
        this.withdraw = (amount) => {
          this.balance -= amount;
        };
      }
      BankAccount();

      // const shivangAccount = new BankAccount("shivang", 5000);
      // const janakAccount = new BankAccount("Janak", 4000);

      // console.log(shivangAccount);
        // console.log(janakAccount);
      //

      // Create Account

      const accountForm = document.querySelector("#accountForm");
      const customerName = document.querySelector("#customerName");
      const balance = document.querySelector("#balance");

      const accounts = [];

      accountForm.addEventListener("submit", function (e) {
        e.preventDefault();
        const account = new BankAccount(customerName.value, balance.value);
        accounts.push(account);
        console.log(balance.value);
        console.log(accounts);
      });

      // Deposit

      const depositForm = document.querySelector("#depositForm");
      const accountNumber = document.querySelector("#accountNumber");
      const amountDeposit = document.querySelector("#amountDeposit");

      depositForm.addEventListener("submit", function (e) {
        e.preventDefault();
        const account = accounts.find(
          (account) => account.accountNumber === +accountNumber.value
        );
        
        account.deposit(+amountDeposit.value);
        console.log(accounts);
      });

      // Deposit

      const withdrawForm = document.querySelector("#withdrawForm");
      const amountWithdraw = document.querySelector("#amountWithdraw");


      withdrawForm.addEventListener("submit", function (e) {
        e.preventDefault();
        const account = accounts.find(
          (account) => account.accountNumber === +accountNumber.value
        );
        console.log(amountWithdraw);
        console.log(+amountWithdraw.value);

        
        account.withdraw(+amountWithdraw.value);
        console.log(accounts);
      });
    </script>
  </body>
</html>
